/*1. Create the following “data.txt”  file. Each record consists of customer's name and their balance:

Maria  Brown  2100.90
Jeffrey  Jackson  200.20
Bernard  Smith  223.10
Matthew  Davenport  1630.20
Kimberly Macias  19100.90
Amber  Daniels  2400.40
The records in the file will be like the text above. You will store them in the struct provided below:
struct  PERSON {
    char  Name[20];
    float Balance; };
i. We don’t know exactly how many records are in the file. You will have to go through the file a first time and count the number of records (N).
ii . Once you have this information, you can create an array that is large enough to hold all of the records in the file PERSON P[N];
iii. Remember that c_strings or character arrays must be null terminated, so you will either need to set every element to ‘/0’ before writing the name, or make sure you put one after you have written the name.
iv. Display all records in array a. Use calling statement: Display(a, N);
Your output should look like the following:
                    Name                 Balance
         -----------------------------------------------
Maria  Brown  2100.90
Jeffrey  Jackson  200.20
Bernard  Smith  223.10
Matthew  Davenport  1630.20
Kimberly Macias  19100.90
Amber  Daniels  2400.40

v. Display the name of customer with maximum balance. Call function FindRichest(a, N);
       Output:
The customer with maximum balance is Kimberly Macias
vi. Allow a customer to deposit money in his/her account. Call function :
 Deposit(CustName, a, N); where CustName is the name of the customer who wants to deposit money
        Output:
Enter your full name to deposit money: Maria  Brown
                        Maria Brown, how much would you like to deposit?  100
Now your new balance is 2200.90

Vii. Copy array a in the same file. Use calling statement NewCopy(“data.txt”, a, N);
(turn in a copy of the file with the new updated records)
*/
#include <iostream>
#define _CRT_SECURE_NO_WARNINGS
#include <algorithm>
# include <fstream>
#include <string>
#include <sstream>
#include <iomanip>
#include <cstring>
using namespace std;
struct  PERSON {
 char  Name[20];
 float Balance;
};

void Display(PERSON a[], int N) {
 for (int i=0;i<N; i++)
 {

  cout << a[i].Name << " " << a[i].Balance << endl;
  i++;
 }
}
void FindRichest(PERSON  *a, int N)
{
 string foo;
 float Money = 0;
 string Richest;
    Richest= a[0].Name;
 for (int i = 0; i < N;)
 {
  if (a[i].Balance>Money){
   Money = a[i].Balance;
   Richest = a[i].Name;
   i++;

  }
 }
 cout << "The Customer With Max Balance is: " <<Richest<<endl;

}
void Dep(string CName, PERSON* a, int N) {
 float depAmount=0;
 string Name;
 string SName;
 cout << CName << " deposit to account?  ";
 cin >> depAmount;
 for (int i = 0; i < N;)
 {
  if (a[i].Name == CName)
  {
   a[i].Balance += depAmount;
   cout << " After deposit balance is " << a[i].Balance;
   i++;
   return;
  }
 }
}

void NewCopy(string file, PERSON a[], int N) {
 int i;
 ofstream PERSONfile;
 PERSONfile.open(file);
 for (i = 0; i < N; i++)
  PERSONfile << a[i].Name << " " << a[i].Balance << endl;
}
int openFile(string file, PERSON a[], int N)
{
 string T;
 string Name;
 string SName;
 float Balance;
 ifstream PERSONfile;
 PERSONfile.open("Text.txt");


  while (!PERSONfile.eof())
  {
   PERSONfile >> Name >> SName >> Balance;
   cout << Name << " " << SName << " " << Balance << " " << endl;

  }
  for (int i = 0; i < N; i++) {
   string foo = Name + " " + SName;
   PERSONfile >> Balance;
   PERSONfile >> Name;
   strcpy_s(a[i].Name, foo.c_str());
   a[i].Balance = Balance;
   PERSONfile >> Name;
  }

 PERSONfile.close();
 return 0;
}
  int main()
{
 string Name;
 string SName;
 string CName;
 int N = 20;
 PERSON *P = new PERSON[N];
 fstream PERSONfile;
 N = openFile("Text.txt", P, N);
 int choice = 0;
 while (choice != 3) {
  cout << "______________________________________________________";
  cout << endl << "1. To Dispaly" << endl;
  cout << "2. To find The Rechest Person " << endl;
  cout << "3. To Deposit " << endl;
  cout << " Choose option: ";
  cin >> choice;
  if (choice == 1) {
   cout << "";
   N= openFile("Text.txt", P, N);
   Display(P, N);
   cout << endl;
  }
  if (choice == 2) {
   FindRichest(P, N);
   cout << endl;
  }
  if (choice == 3) {
   cout << "Please Enter Name followed with LName:"<<endl;
   cin >> Name;
   cin >> SName;
   CName = Name + " " + SName;
   N = openFile("Text.txt", P, N);
   Dep(CName, P, N);

  }


 }
 return openFile("Text.txt", P, N);

 return(0);
}
